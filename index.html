<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>계이름 연주기</title>
    <link rel="stylesheet" href="css/styles.css">
</head>
<body>
    <header>
        <h1>계이름 연주기</h1>
        <div class="controls">
            <div class="control-row">
                <span class="control-label">스케일</span>
                <button class="control-button active" data-scale="major">Major</button>
                <button class="control-button" data-scale="minor">Minor</button>
                <button class="control-button" data-scale="pentatonic">Pentatonic</button>
                <button class="control-button" data-scale="blues">Blues</button>
                <button class="control-button" data-scale="chromatic">Chromatic</button>
                <button class="control-button" data-scale="dorian">Dorian</button>
            </div>
            <div class="control-row">
                <span class="control-label">옥타브</span>
                <button class="control-button active" data-octave="1">1</button>
                <button class="control-button" data-octave="2">2</button>
                <button class="control-button" data-octave="3">3</button>
                <span class="control-label">파형</span>
                <button class="control-button active" data-wave="sine">Sine</button>
                <button class="control-button" data-wave="square">Square</button>
                <button class="control-button" data-wave="triangle">Triangle</button>
                <button class="control-button" data-wave="sawtooth">Sawtooth</button>
                <div class="volume-control">
                    <span class="control-label">볼륨</span>
                    <input type="range" class="volume-slider" id="volumeSlider" min="0" max="100" value="50">
                    <span class="volume-value" id="volumeValue">50%</span>
                </div>
            </div>
            <div class="control-row">
                <span class="control-label">메트로놈</span>
                <button class="metronome-btn" id="metronomeToggle" title="메트로놈 시작/정지">▶</button>
                <span class="control-label">박자</span>
                <button class="control-button active" data-time-sig="4">4/4</button>
                <button class="control-button" data-time-sig="3">3/4</button>
                <span class="control-label">BPM</span>
                <button class="bpm-preset" data-bpm="60">60</button>
                <button class="bpm-preset" data-bpm="80">80</button>
                <button class="bpm-preset active" data-bpm="100">100</button>
                <button class="bpm-preset" data-bpm="120">120</button>
                <div class="metronome-control">
                    <input type="range" class="bpm-slider" id="bpmSlider" min="40" max="200" value="100">
                    <span class="bpm-value" id="bpmValue">100 BPM</span>
                </div>
                <div class="accompaniment-divider"></div>
                <span class="control-label">반주</span>
                <button class="accompaniment-btn" id="accompanimentToggle" title="반주 켜기/끄기">🎹</button>
                <select class="progression-select" id="progressionSelect">
                    <option value="pop">Pop</option>
                    <option value="classic">Classic</option>
                    <option value="sad">Sad</option>
                    <option value="jazz">Jazz</option>
                    <option value="fifties">50s</option>
                </select>
            </div>
        </div>
    </header>

    <div class="button-container" id="noteContainer"></div>

    <section class="recording-section">
        <div class="recording-header">
            <div class="recording-indicator" id="recordingIndicator"></div>
            <span class="recording-title" id="recordingTitle">녹음 대기</span>
            <button class="new-recording-btn" id="newRecordingBtn">새 연주</button>
            <button class="settings-toggle" id="settingsToggle" title="녹음 설정">⚙️</button>
        </div>
        <div class="settings-panel" id="settingsPanel">
            <div class="settings-row">
                <span class="settings-label">녹음 모드</span>
                <select class="settings-select" id="recordingModeSelect">
                    <option value="time">시간 기반 (자동 구분)</option>
                    <option value="manual">수동 구분</option>
                    <option value="continuous">무한 연속</option>
                </select>
            </div>
            <div class="settings-row" id="delaySettingRow">
                <span class="settings-label">대기 시간</span>
                <input type="number" class="settings-input" id="autoSaveDelayInput" value="3" min="1" max="30">
                <span style="font-size: 0.8rem; color: #888;">초</span>
            </div>
        </div>
        <div class="recording-list" id="recordingList"></div>
    </section>

    <p class="footer">버튼을 클릭하거나 키보드(1행: 숫자, 2행: Q~], 3행: A~')를 누르면 소리가 납니다</p>

    <script type="module" src="js/main.js"></script>
</body>
</html>
