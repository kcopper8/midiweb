# 테스트 커버리지 매트릭스

이 문서는 SPEC.md의 기능 명세와 E2E 테스트의 매핑을 관리합니다.

## 범례

| 상태 | 의미 |
|------|------|
| ✅ | 테스트 완료 |
| ⚠️ | 부분 테스트 |
| ❌ | 테스트 없음 |
| N/A | 테스트 불필요 |

## 커버리지 요약

| 영역 | 커버리지 |
|------|----------|
| 음 재생 (PLAY) | 1/3 (33%) |
| 스케일 선택 (SCALE) | 2/2 (100%) |
| 파형 선택 (WAVE) | 1/1 (100%) |
| 볼륨 조절 (VOLUME) | 1/1 (100%) |
| UI/UX (UI) | 2/4 (50%) |
| 입력 지원 (INPUT) | 1/3 (33%) |
| 음 표기 (LABEL) | 1/1 (100%) |
| 녹음/재생 (REC) | 5/5 (100%) |
| 메트로놈 (METRO) | 4/4 (100%) |
| 자동 반주 (ACCOMP) | 0/4 (0%) |

---

## 상세 매핑

### 1. 음 재생 {#PLAY}

| 스펙 ID | 기능 | 테스트 파일 | 테스트명 | 상태 |
|---------|------|-------------|----------|------|
| PLAY-01 | 버튼 클릭 시 음 재생 | - | - | ❌ |
| PLAY-02 | 주파수 계산 | - | - | N/A |
| PLAY-03 | 옥타브 선택 (1~3) | keyboard-controls.spec.js | `[PLAY-03] 옥타브 변경 시 건반 행이 추가된다` | ✅ |

> **참고**: PLAY-01 음 재생은 Web Audio API 테스트가 필요하여 E2E에서 검증하기 어려움

### 2. 스케일 선택 {#SCALE}

| 스펙 ID | 기능 | 테스트 파일 | 테스트명 | 상태 |
|---------|------|-------------|----------|------|
| SCALE | 스케일별 음 개수 | keyboard-controls.spec.js | `[SCALE] 건반 버튼이 렌더링된다` | ✅ |
| SCALE | 스케일 변경 | keyboard-controls.spec.js | `[SCALE] 스케일 변경 시 건반 개수가 변경된다` | ✅ |

### 3. 파형 선택 {#WAVE}

| 스펙 ID | 기능 | 테스트 파일 | 테스트명 | 상태 |
|---------|------|-------------|----------|------|
| WAVE | 파형 변경 | keyboard-controls.spec.js | `[WAVE] 파형 변경이 작동한다` | ✅ |

### 4. 볼륨 조절 {#VOLUME}

| 스펙 ID | 기능 | 테스트 파일 | 테스트명 | 상태 |
|---------|------|-------------|----------|------|
| VOLUME | 볼륨 슬라이더 | keyboard-controls.spec.js | `[VOLUME] 볼륨 슬라이더가 작동한다` | ✅ |

### 5. UI/UX {#UI}

| 스펙 ID | 기능 | 테스트 파일 | 테스트명 | 상태 |
|---------|------|-------------|----------|------|
| UI-01 | 레이아웃/기본 UI | keyboard-controls.spec.js | `[UI-01] 페이지 로드 시 기본 UI가 표시된다` | ✅ |
| UI-02 | 디자인 테마 | - | - | N/A |
| UI-03 | 인터랙션 (active 상태) | keyboard-controls.spec.js | `[UI-03] 건반 클릭 시 active 클래스가 추가된다` | ✅ |
| UI-04 | 컨트롤 UI | - | - | ⚠️ |

> **참고**: UI-04는 각 기능 테스트에서 간접적으로 검증됨

### 6. 입력 지원 {#INPUT}

| 스펙 ID | 기능 | 테스트 파일 | 테스트명 | 상태 |
|---------|------|-------------|----------|------|
| INPUT-01 | 마우스 입력 | keyboard-controls.spec.js | `[UI-03] 건반 클릭 시 active 클래스가 추가된다` | ⚠️ |
| INPUT-02 | 터치 입력 | - | - | ❌ |
| INPUT-03 | 키보드 입력 | keyboard-controls.spec.js | `[INPUT-03] 건반에 키보드 힌트가 표시된다` | ✅ |
| INPUT-03 | 3옥타브 키보드 | keyboard-controls.spec.js | `[INPUT-03] 3옥타브 모드에서 각 행에 키보드 힌트가 표시된다` | ✅ |

> **참고**: 실제 키보드 입력 테스트는 포함되지 않음 (힌트 표시만 검증)

### 7. 음 표기 {#LABEL}

| 스펙 ID | 기능 | 테스트 파일 | 테스트명 | 상태 |
|---------|------|-------------|----------|------|
| LABEL | 한글/영문 음 표기 | keyboard-controls.spec.js | `[LABEL] 건반에 음 정보가 표시된다` | ✅ |

### 8. 즉석 재생 (녹음/재생) {#REC}

| 스펙 ID | 기능 | 테스트 파일 | 테스트명 | 상태 |
|---------|------|-------------|----------|------|
| REC-01 | 자동 녹음 시작 | recording.spec.js | `[REC-01] 건반 클릭 시 녹음 인디케이터가 활성화된다` | ✅ |
| REC-02 | 시간 기반 모드 | recording.spec.js | `[REC-02] 시간 기반 모드에서 자동 저장된다` | ✅ |
| REC-02 | 설정 패널 | recording.spec.js | `[REC-02] 설정 패널이 토글된다` | ✅ |
| REC-02 | 녹음 모드 변경 | recording.spec.js | `[REC-02] 녹음 모드 변경이 작동한다` | ✅ |
| REC-02 | 대기 시간 설정 | recording.spec.js | `[REC-02] 대기 시간 설정이 작동한다` | ✅ |
| REC-02 | 수동 모드 | recording.spec.js | `[REC-02] 수동 모드에서 새 연주 버튼이 작동한다` | ✅ |
| REC-03 | 녹음 목록 UI | recording.spec.js | `[REC-03] 녹음 섹션 UI가 표시된다` | ✅ |
| REC-03 | 녹음 정보 표시 | recording.spec.js | `[REC-03] 녹음 목록에 시간과 길이가 표시된다` | ✅ |
| REC-04 | 재생 버튼 | recording.spec.js | `[REC-04] 재생 버튼이 작동한다` | ✅ |
| REC-04 | 정지 버튼 | recording.spec.js | `[REC-04] 정지 버튼이 작동한다` | ✅ |
| REC-04 | 삭제 버튼 | recording.spec.js | `[REC-04] 삭제 버튼이 작동한다` | ✅ |
| REC-05 | 데이터 저장 | - | - | N/A |

### 9. 메트로놈 {#METRO}

| 스펙 ID | 기능 | 테스트 파일 | 테스트명 | 상태 |
|---------|------|-------------|----------|------|
| METRO-01 | 시작/정지 | metronome.spec.js | `[METRO-01] 메트로놈 시작/정지 버튼이 토글된다` | ✅ |
| METRO-01 | BPM 변경 시 재시작 | metronome.spec.js | `[METRO-01] 메트로놈 실행 중 BPM 변경 시 재시작된다` | ✅ |
| METRO-02 | 박자 선택 | metronome.spec.js | `[METRO-02] 박자 선택이 작동한다` | ✅ |
| METRO-03 | BPM 프리셋 | metronome.spec.js | `[METRO-03] BPM 프리셋 버튼이 작동한다` | ✅ |
| METRO-03 | BPM 슬라이더 | metronome.spec.js | `[METRO-03] BPM 슬라이더가 작동한다` | ✅ |
| METRO-04 | UI 표시 | metronome.spec.js | `[METRO-04] 메트로놈 UI가 표시된다` | ✅ |

### 10. 자동 반주 {#ACCOMP}

| 스펙 ID | 기능 | 테스트 파일 | 테스트명 | 상태 |
|---------|------|-------------|----------|------|
| ACCOMP-01 | 반주 토글 | - | - | ❌ |
| ACCOMP-02 | 코드 재생 | - | - | ❌ |
| ACCOMP-03 | 프리셋 선택 | - | - | ❌ |
| ACCOMP-04 | UI 표시 | - | - | ❌ |

> **참고**: 자동 반주는 메트로놈과 연동되어 동작하며, 오디오 출력 검증이 필요하여 E2E 테스트가 어려움

---

## 테스트되지 않은 항목

다음 항목은 E2E 테스트 범위 외이거나 수동 테스트가 필요합니다:

| 스펙 ID | 기능 | 이유 |
|---------|------|------|
| PLAY-01 | 음 재생 | Web Audio API 출력 검증 불가 |
| PLAY-02 | 주파수 계산 | 내부 로직 (유닛 테스트 권장) |
| INPUT-02 | 터치 입력 | 모바일 환경 필요 |
| UI-02 | 디자인 테마 | 시각적 검증 (스냅샷 테스트 권장) |
| ACCOMP-* | 자동 반주 | Web Audio API 출력 검증 불가, 메트로놈 연동 |

---

## 테스트 실행

```bash
# 전체 테스트 실행
npx playwright test

# 특정 스펙 ID로 테스트 필터링
npx playwright test --grep "METRO"
npx playwright test --grep "REC-02"
```
